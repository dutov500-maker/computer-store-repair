-- Создание таблицы для товаров каталога
CREATE TABLE IF NOT EXISTS catalog_items (
  id SERIAL PRIMARY KEY,
  title VARCHAR(255) NOT NULL,
  description TEXT,
  price INTEGER NOT NULL,
  resolution VARCHAR(50),
  specs JSONB,
  image_url TEXT,
  display_order INTEGER DEFAULT 0,
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Создание таблицы для информационных страниц
CREATE TABLE IF NOT EXISTS pages (
  id SERIAL PRIMARY KEY,
  slug VARCHAR(100) UNIQUE NOT NULL,
  title VARCHAR(255) NOT NULL,
  content TEXT,
  meta_description TEXT,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Вставка начальных данных для каталога
INSERT INTO catalog_items (title, description, price, resolution, specs, display_order) VALUES
('Игровой ПК FHD Basic', 'Отличное решение для игр в Full HD с высокими настройками графики', 70000, 'FHD', '{"cpu": "Intel Core i5-12400F", "gpu": "RTX 3060", "ram": "16GB DDR4", "storage": "512GB SSD"}', 1),
('Игровой ПК QHD Pro', 'Идеальный баланс производительности и цены для QHD-гейминга', 120000, 'QHD', '{"cpu": "Intel Core i7-12700K", "gpu": "RTX 4070", "ram": "32GB DDR4", "storage": "1TB SSD"}', 2),
('Игровой ПК UHD Ultra', 'Безграничная мощность для 4K-игр и профессиональных задач', 200000, 'UHD', '{"cpu": "Intel Core i9-13900K", "gpu": "RTX 4090", "ram": "64GB DDR5", "storage": "2TB NVMe"}', 3)
ON CONFLICT DO NOTHING;

-- Вставка начальных страниц
INSERT INTO pages (slug, title, content, meta_description) VALUES
('about', 'О компании', '<h2>Добро пожаловать в Компьютерную Лабораторию</h2><p>Мы занимаемся сборкой игровых компьютеров и ремонтом техники с 2015 года. За это время мы собрали более 5000 компьютеров и помогли тысячам клиентов с ремонтом.</p><h3>Наши принципы:</h3><ul><li>Только качественные комплектующие от официальных поставщиков</li><li>Честные цены без скрытых наценок</li><li>Гарантия на все работы и комплектующие</li><li>Индивидуальный подход к каждому клиенту</li></ul><p>Наша команда состоит из опытных специалистов, которые постоянно следят за новинками рынка и могут подобрать оптимальную конфигурацию под любые задачи и бюджет.</p>', 'О компании - профессиональная сборка и ремонт компьютеров'),

('warranty', 'Гарантия', '<h2>Гарантийные условия</h2><p>Мы уверены в качестве наших услуг, поэтому предоставляем расширенную гарантию на все работы.</p><h3>Гарантия на сборку компьютера:</h3><ul><li>Гарантия на сборку и настройку - 12 месяцев</li><li>Гарантия на комплектующие - от 1 до 3 лет (в зависимости от производителя)</li><li>Бесплатная диагностика в течение гарантийного срока</li><li>Бесплатный ремонт при гарантийном случае</li></ul><h3>Гарантия на ремонт:</h3><ul><li>Гарантия на выполненные работы - 6 месяцев</li><li>Гарантия на установленные детали - согласно гарантии производителя</li><li>Бесплатное повторное обращение при рецидиве неисправности</li></ul><h3>Что не входит в гарантию:</h3><ul><li>Механические повреждения</li><li>Повреждения от неправильной эксплуатации</li><li>Самостоятельный ремонт клиентом</li><li>Форс-мажорные обстоятельства</li></ul>', 'Гарантийные условия на сборку и ремонт компьютеров'),

('delivery', 'Доставка и оплата', '<h2>Условия доставки</h2><p>Мы доставим ваш компьютер быстро и безопасно в любую точку России.</p><h3>Доставка по Москве:</h3><ul><li>Бесплатная доставка при заказе от 50 000 ₽</li><li>Платная доставка - 500 ₽</li><li>Срок доставки - 1-2 дня после сборки</li><li>Доставка с подъемом на этаж и распаковкой</li></ul><h3>Доставка по России:</h3><ul><li>Бесплатная доставка при заказе от 100 000 ₽</li><li>Транспортная компания на выбор клиента</li><li>Срок доставки - 3-7 дней в зависимости от региона</li><li>Страхование груза</li></ul><h3>Самовывоз:</h3><ul><li>Бесплатно из нашего офиса</li><li>Адрес: Москва, ул. Примерная, д. 1</li><li>Время работы: Пн-Вс с 10:00 до 20:00</li></ul><h3>Способы оплаты:</h3><ul><li>Наличные при получении</li><li>Банковская карта</li><li>Безналичный расчет для юридических лиц</li><li>Рассрочка от банков-партнеров</li></ul>', 'Условия доставки и оплаты компьютеров')
ON CONFLICT (slug) DO NOTHING;